{% extends 'study_abroad_app/base.html' %}
{% load static %}
{% block content %}

<!-- Choices.js CSS for enhanced dropdowns -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">

<style>
/* ================= SCROLLABLE DROPDOWN ================= */
.nice-select .list {
  max-height: 200px;           /* Max height for dropdown */
  overflow-y: auto;            /* Enables vertical scrolling */
  scrollbar-width: thin;       /* Firefox scrollbar width */
  scrollbar-color: #ccc #fff;  /* Custom scrollbar colors */
}

/* ================= NAME FIELDS GRID ================= */
.name-fields {
  display: grid;
  grid-template-columns: 1fr 1fr; /* Two equal columns for first & last name */
  gap: 15px;                      /* Space between columns */
}

.name-fields input {
  width: 100%; /* Make input fill column width */
}

/* ================= PAGE STYLING ================= */
body { 
  font-family: 'Poppins', sans-serif; 
  background: #f8f8f8; 
  margin: 0; 
  padding: 0; 
}

/* Counsellor Page Background */
.counsellor_page { 
  padding: 80px 0; 
  background: url("{% static 'img/img7.jpg' %}") no-repeat center center; 
  background-size: cover; 
  position: relative; 
  z-index: 1; 
}

/* Overlay to slightly fade background */
.counsellor_page::before { 
  content: ""; 
  position: absolute; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  background: rgba(255,255,255,0.8); 
  z-index: -1; 
}

/* Container for the form */
.counsellor_container { 
  max-width: 600px; 
  background: #fff; 
  padding: 40px 30px; 
  margin: 0 auto; 
  border-radius: 10px; 
  box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
  text-align: center; 
}

/* Counsellor Form Styling */
.counsellor_form { 
  display: grid; 
  gap: 15px; 
  text-align: left; 
}

.counsellor_form input, 
.counsellor_form select, 
.counsellor_form textarea { 
  width: 100%; 
  padding: 12px; 
  border: 1px solid #ccc; 
  border-radius: 6px; 
  font-size: 14px; 
}

/* Scrollable select dropdown */
.counsellor_form select {
  max-height: 200px;
  overflow-y: auto;
  width: 100%;
  border-radius: 6px;
}

/* Custom scrollbar for dropdowns */
.counsellor_form select::-webkit-scrollbar { width: 6px; }
.counsellor_form select::-webkit-scrollbar-thumb { 
  background-color: #ff6600; 
  border-radius: 3px; 
}

/* Submit button */
.counsellor_form button { 
  width: 100%; 
  background: #ff6600; 
  color: #fff; 
  border: none; 
  padding: 14px; 
  font-size: 16px; 
  font-weight: 600; 
  border-radius: 25px; 
  cursor: pointer; 
  margin-top: 10px; 
}

.counsellor_form button:hover { background: #e65c00; }

/* Success message */
.success_message { 
  color: green; 
  font-size: 16px; 
  font-weight: 600; 
  text-align: center; 
  margin-bottom: 15px; 
}
</style>

<!-- ================= COUNSELLOR FORM SECTION ================= -->
<section class="counsellor_page">
  <div class="counsellor_container">
    <h2>Talk to Our Counsellors</h2>

    <!-- Display success messages -->
    {% if messages %}
      {% for message in messages %}
        <div class="success_message">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <!-- Counsellor Form -->
    <form method="POST" class="counsellor_form">
      {% csrf_token %}

      <!-- First & Last Name side by side -->
      <div class="name-fields">
        <div>
          {{ form.first_name.label_tag }}
          {{ form.first_name }}
        </div>
        <div>
          {{ form.last_name.label_tag }}
          {{ form.last_name }}
        </div>
      </div>

      <!-- Remaining fields stacked vertically -->
      {{ form.email.label_tag }} {{ form.email }}
      {{ form.phone.label_tag }} {{ form.phone }}
      {{ form.city.label_tag }} {{ form.city }}
      {{ form.state.label_tag }} {{ form.state }}
      {{ form.target_country.label_tag }} {{ form.target_country }}
      {{ form.target_intake.label_tag }} {{ form.target_intake }}
      {{ form.message.label_tag }} {{ form.message }}

      <!-- Submit button -->
      <button type="submit">Submit</button>
    </form>
  </div>
</section>

{% endblock %}
